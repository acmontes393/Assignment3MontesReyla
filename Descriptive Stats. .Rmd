---
title: "An analysis of the effects of internet and mobile usage on migration"
author: "Ayra Rowena Reyla and Ana Cecilia Montes"
date: "13 November 2015"
output: 
      pdf_document:
       includes:
          in_header: header.tex
      


highlight: zenburn
theme: united
toc: yes
toc_depth: 3
---

```{r setup, include=FALSE, echo=FALSE, warning=FALSE, error=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = FALSE)

#install.packages('WDI')
#install.packages('tidyr')
#install.packages('rio')
#install.packages('countrycode')
#install.packages("RJOSONIO")  
#install.packages ("ggplot2")
#install.packages("rworldmap")
#install.packages("sp")
#install.packages("joinCountryData2Map")
#install.packages("plm")
#install.packages("Formula")
#install.packages("pglm")

# Loading packages
library("maptools")
library("countrycode")
library("RJSONIO")
library("WDI")
library("tidyr")
library("rio")
library("ggplot2")
library("rworldmap")
library("sp")
library('Formula')
library('plm')
library('pglm')

# Setting directory
#setwd('/Users/AnaCe/Desktop/Assignment3MontesReyla')
setwd('/Users/ayrarowenareyla/Desktop/The Hertie School of Governance/Collaborative Social Sciences/Assignment3MontesReyla/Assignment3MontesReyla')

#loading data set
Merged <- read.csv(file="MontesandReyla")

#Set data as panel data
Merged <- plm.data(Merged, index=c("iso2c", "year"))

# sub dataframes by year
merged90 <-subset(Merged, year==1990)
merged00 <-subset(Merged, year==2000)
merged10 <-subset(Merged, year==2010)
merged13 <-subset(Merged, year==2013)

```

#Introduction

Migration is one of the three main determinants of a country's population development. The other two - the birth and death rate - are generally believed to be easier to forecast [@Castles2014]. However, the literature has associated migration to factors that have classically been seen as drivers for migration between two countries such as [a] conditions in the sending country driving out inhabitants, including political troubles, persecution, conflict and other "push factors"", [b] conditions in the receiving country attracting migrants, such as higher wages, better know as "pull factors", and [c] factors which facilitate or authorize the migration process itself, such as the receiving country's immigration politics. 

One driving factor increasingly put forward in recent years is the use of technology. According to @Hiller2004, computer mediated communication has created new possibilities for migrants to maintain strong linkages and ties with their home nations. Not only has new technology improved and heightened communication, it has also bridged cultural gap between countries as it allows people to easily gathering new information and knowledge about other cultures. This of course has made a large impact on people's perception on other cultures and their worldviews. Overall, technology has changed the landscape for communicating, and gathering knowledge and information. These revolutions that have transformed society are making travel and telecommunications cheaper and easier than ever. Moreover, Technology has enhanced the aspects of interaction as it is transforming the way individuals communicate. 

## The Research Question
This primary analysis will attempt to answer the following question using empirical methods: 

Has the increase use of technologies such as internet and mobile phones affected the flow of emigration?


#Methodology

In order to examine the flows of migration, we intend to use data on trends in _International Migrant Stock_ produced by the United Nations. The data contains information from 232 countries and provides the number of migrants by destination and country of origin for four periods of time; 1990, 2000, 2010, and 2013. Moreover, to account for technology diffusion we will use _World Bank indicators_ on the number of Internet users and the number of cellular mobile subscriptions for each country. 

The _International Migrant Stock Total_ indicates the number of people born in a country other than the country in which they currently reside in, this includes refugees as well. The data set estimates the international migrant stock at a particular time and are mainly collect from population censuses. 
Also, the data set presents the estimates of : (1) international migrant stock at mid-year; (2) total population at mid-year (thousands); (3) international migrant stock as a percentage of the total population; (4) annual rate of change of migrant stock (percentage); and (5) estimated number of refugees. The estimates are based on official statistics on the foreign-born or the foreign population. 

This analysis will focus on the estimates for the years 1990, 2000, 2010 and 2013. 

Additionally, in order to conduct a more thorough analysis we will include a number of aggregate metadata collected from _The World Bank indicators_. There are many other determinants of migration, that is why this analysis chooses to include a wide variety of World Bank indicators. The chosen indicators are used to measure certain push factors. 

To measure economic and demographic determinants this analysis includes the _fertility rate_ indicator. Indicators such as _poverty_ and _unemployment_ have been removed from the analysis, as there are many missing values in the data set. 

To account for political factors the this analysis used  _World Bank Governance indicators_, which includes _government effectiveness_, _regulatory quality_, _rule of law_, and _voice and accountability_. We have omitted _intentional homocides_, _political stability_, and _control of corruption_ indicators because there was a lack of observations in the data set to conduct a complete analysis. 

#Data Gathering 

This section of the analysis will go into deep detail on our data gathering methods. 

##International Migration Stock, Total

The original data was obtained through the United Nations Population Division, and downloaded through our repository as a Microsoft Excel file. The Excel datasheet had a matrix that described the population outflows and inflows for each country and for several time periods. This analysis focuses four time series; 1990. 2000, 2010 and 2013. 

Gather the data using the **import** command, afterwards we used a loop to import the file to R Studio. Since this analysis is only interested in migration, we only extracted the Migration column from all the countries in the data set, and created a vector. From each matrix, we only selected the years of interest for this analysis. Afterwards we transposed the data to transform it into a more usable and readable format, and then we declared it as a data frame. Using the command **callnames**, we renamed each column appropriately. We ended the loop by assigned each year to a specific data frame. Using the command **cbind** we combined all the extracted data from above, thus creating combined year in a singular data frame. In order to reshape the new data frame, we used the command **gather**. This takes multiple columns and collapses them into key value pairs, this created two new variables called _emmigration_ and _year_. Finally, we included the corresponding year names to the specific year variables. 

## World Bank Indicators

To import the indicators we used **install.packages ('WDI)**, afterwards we imported it into our library using **library("WDI")**. Then, we specified which indicators we wanted to include in our analysis by using the specific codes available on the metadata set of the World Bank. We then properly renamed the variables using the **rename** command. Once the data was loaded, we used **Merged <- merge(emigrationtotal, WDI_indi, by = c('iso2c','year'))** to combine the WDI indicators with the International Migration Stock. 


## Final Data Gathering
how
After importing and merging all the data into a singular data frame, a lot of missing values (NAs) were observed. To properly clean the data and omit the NAs the **is.na** command was used. However, in this process a total of ten countries were committed from the data frame, due to the lack of relevant information in our control variables. 

#Descriptive Statistics

## Dependent Variables

Our dependent variable is the total migrant stock at mid-year by country of origin, which we retrived from the United Nations Population division. It collected census data from 232 countries in 1990, 2000, 2010 and 2013. 

### Patterns of Emmigration
   
\blandscape    
<center>
```{r merged90, tidy=TRUE, warning=FALSE, comment="Note:", error=FALSE, echo=FALSE, cache=FALSE, results="hold"}
# Graphs
# 1990
sPDF <- joinCountryData2Map( merged90
                             ,joinCode = "ISO2"
                             ,nameJoinColumn = "iso2c")
Emi90 <- mapCountryData(sPDF, nameColumnToPlot='emigrationpercap', 
                        mapTitle= 'Fig 1. Number of emigrants per capita 1990', 
                        colourPalette = c("darkorange", "coral2","gold","aquamarine1", "cyan3", "blue","magenta"), 
                        borderCol='black', missingCountryCol="beige")


# 2000
sPDFII <- joinCountryData2Map( merged00
                             ,joinCode = "ISO2"
                             ,nameJoinColumn = "iso2c")
mapCountryData(sPDFII, nameColumnToPlot='emigrationpercap', mapTitle= 'Fig 2. Number of emigrants per capita 2000',
               colourPalette = c("darkorange", "coral2","gold","aquamarine1", "cyan3", "blue","magenta"),
               borderCol='black', missingCountryCol="beige")

# 2010
sPDFIII <- joinCountryData2Map( merged10
                                ,joinCode = "ISO2"
                                ,nameJoinColumn = "iso2c")
mapCountryData(sPDFIII, nameColumnToPlot='emigrationpercap', mapTitle= 'Fig 3. Number of emigrants per capita 2010',
               colourPalette = c("darkorange", "coral2","gold","aquamarine1", "cyan3", "blue","magenta"),
               borderCol='black', missingCountryCol="beige")

# 2013
sPDFIV <- joinCountryData2Map( merged13
                               ,joinCode = "ISO2"
                               ,nameJoinColumn = "iso2c")
mapCountryData(sPDFIV, nameColumnToPlot='emigrationpercap', mapTitle= 'Fig 4. Number of emigrants per capita 2013',
               colourPalette = c("darkorange", "coral2","gold","aquamarine1", "cyan3", "blue","magenta"),
               borderCol='black', missingCountryCol="beige")

```
\elandscape 

## Independent Variables



#Inferential Statistics

